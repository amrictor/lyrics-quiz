(this["webpackJsonplyrics-quiz"]=this["webpackJsonplyrics-quiz"]||[]).push([[0],{167:function(t,e,a){},175:function(t,e,a){t.exports=a(396)},180:function(t,e,a){},204:function(t,e){},218:function(t,e){},220:function(t,e){},386:function(t,e,a){},387:function(t,e,a){},390:function(t,e,a){},391:function(t,e,a){},392:function(t,e,a){},395:function(t,e,a){},396:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(169),o=a.n(i),r=(a(180),a(6)),l=a(7),c=a(9),d=a(8),u=a(2),p=a(10),h=a(23),g=a(397),m=a(170),f=a.n(m),y=(a(386),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={time:0},a.passTime=a.passTime.bind(Object(u.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.passTime,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"passTime",value:function(){this.props.forfeit_status||this.props.gameWon()||this.setState({time:this.state.time+1})}},{key:"padNumber",value:function(t){if(t<100)return("0"+t).slice(-2)}},{key:"render",value:function(){return s.a.createElement("div",{id:"timer",className:this.props.forfeit_status?"forfeit":this.props.gameWon()?"won":""},this.padNumber(Math.floor(this.state.time/3600)%24),":",this.padNumber(Math.floor(this.state.time/60)%60),":",this.padNumber(this.state.time%60))}}]),e}(n.Component)),v=(a(387),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={discoveredWords:[],forfeit_status:!1},a.getLyrics=a.getLyrics.bind(Object(u.a)(a)),a.setSong=a.setSong.bind(Object(u.a)(a)),a.discover=a.discover.bind(Object(u.a)(a)),a.forfeit=a.forfeit.bind(Object(u.a)(a)),a.checkWord=a.checkWord.bind(Object(u.a)(a)),a.gameWon=a.gameWon.bind(Object(u.a)(a)),a.lyricDiscovered=a.lyricDiscovered.bind(Object(u.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.getSong()}},{key:"componentDidUpdate",value:function(t){this.props.match.params.genius_id!==t.match.params.genius_id&&(this.setState({song:void 0,forfeit_status:!1,discoveredWords:[]}),this.getSong())}},{key:"getSong",value:function(){var t=this.getLyrics,e=new XMLHttpRequest;e.open("GET","https://api.genius.com/songs/"+this.props.match.params.genius_id+"?access_token=4qtBMiQeR5pD1zFm-vGmFV6j5khGAiRQskTCLXyuGbxeYGbnXrTnXIyA5n2iXjdg",!0),e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(1!==e.getResponseHeader("Content-Type").indexOf("text")&&t(JSON.parse(e.responseText).response.song))},e.send()}},{key:"getLyrics",value:function(t){var e=this.setSong,a=new XMLHttpRequest;a.open("GET","https://cors-anywhere.herokuapp.com/"+t.url,!0),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status&&1!==a.getResponseHeader("Content-Type").indexOf("text")){var n=f.a.load(a.responseText),s={};s.title=t.title?t.title:"N/A",s.album=t.album?t.album.name:"N/A",s.artist=t.primary_artist?t.primary_artist.name:"N/A",s.url=t.url,s.lyrics=n(".lyrics").text().replace(/\[.*\]/g,"").trim().replace(/[\u2019\u2018]/g,"'").split(/[\r\n\s,?!:;().\u2026"\u201c\u201d\u2014-]+/).filter((function(t){return!t.match(/^[\s']+$/)&&t})),e(s)}},a.send()}},{key:"forfeit",value:function(){this.setState({forfeit_status:!0})}},{key:"setSong",value:function(t){this.setState({song:t,discoveredWords:[],forfeit:!1})}},{key:"discover",value:function(t,e){var a=this.state.discoveredWords;a[e]=t,this.setState({discoveredWords:a})}},{key:"wordsEquivalent",value:function(t,e){return t.toLowerCase().replace(/'/g,"").trim()===e.toLowerCase().replace(/'/g,"").trim()}},{key:"lyricDiscovered",value:function(t){var e=this;return this.state.discoveredWords.map((function(a){return e.wordsEquivalent(a,t)})).includes(!0)}},{key:"checkWord",value:function(t){var e=this,a=t.target.value;this.lyricDiscovered(a)||this.state.song.lyrics.forEach((function(n,s){e.wordsEquivalent(n,a)&&(e.discover(n,s),t.target.value="")}))}},{key:"gameWon",value:function(){return"undefined"!==typeof this.state.song&&JSON.stringify(this.state.discoveredWords)===JSON.stringify(this.state.song.lyrics)}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{id:"outer_display"},"undefined"!=typeof this.state.song?s.a.createElement("div",{id:"display"},this.gameWon()&&s.a.createElement("div",{id:"winner"},"You won!"),s.a.createElement(g.a,{type:"search",disabled:this.state.forfeit_status||this.gameWon(),onChange:this.checkWord}),s.a.createElement("div",{id:"info"},s.a.createElement("div",null,this.state.discoveredWords.filter((function(t){return t})).length," / ",this.state.song.lyrics.length),s.a.createElement(y,{forfeit_status:this.state.forfeit_status,gameWon:this.gameWon}),s.a.createElement("button",{disabled:this.state.forfeit_status||this.gameWon(),onClick:this.forfeit},"Forfeit")),(this.state.forfeit_status||this.gameWon())&&s.a.createElement("div",{id:"song_title",className:this.state.forfeit_status?"forfeit":"won"},this.state.song.title),s.a.createElement("div",{id:"lyrics"},this.state.song.lyrics.map((function(e,a){return s.a.createElement("div",{key:a,className:"word "+(t.lyricDiscovered(e)?"":t.state.forfeit_status?"forfeit":"undiscovered")},e)}))),(this.state.forfeit_status||this.gameWon())&&s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.state.song.url},"Notice something wrong with these lyrics? ",s.a.createElement("br",null),"Help fix them by following this link and suggesting a change!")):"Loading...")}}]),e}(n.Component)),b=(a(390),a(11)),k=(a(391),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={expanded:!1},a.toggle=a.toggle.bind(Object(u.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"toggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){return s.a.createElement("div",{id:"sidebar",className:this.state.expanded?" expanded":"hidden"},s.a.createElement("div",{id:"header"},s.a.createElement("div",{id:"title",className:this.state.expanded?" expanded":"hidden"},this.props.title),s.a.createElement("div",{className:"spacer"}),s.a.createElement(b.a,{id:"icon",className:this.state.expanded?"":"icon-hidden",onClick:this.toggle})),s.a.createElement("div",{id:"children",className:this.state.expanded?" expanded":"hidden"},this.props.children))}}]),e}(n.Component)),E=(a(167),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={search:"",results:[]},a.updateInput=a.updateInput.bind(Object(u.a)(a)),a.getSearchResults=a.getSearchResults.bind(Object(u.a)(a)),a.search=a.search.bind(Object(u.a)(a)),a.listenForEnter=a.listenForEnter.bind(Object(u.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"getSearchResults",value:function(t){console.log(t);var e=t.response.hits.map((function(t){return{title:t.result.title,artist:{name:t.result.primary_artist.name,id:t.result.primary_artist.id},lyrics_path:t.result.path,song_path:t.result.api_path,image:t.result.song_art_image_url}}));console.log(e),this.setState({results:e})}},{key:"getGenius",value:function(t,e){var a=new XMLHttpRequest;a.open("GET","https://api.genius.com"+t+"&access_token=4qtBMiQeR5pD1zFm-vGmFV6j5khGAiRQskTCLXyuGbxeYGbnXrTnXIyA5n2iXjdg",!0),a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(1!==a.getResponseHeader("Content-Type").indexOf("text")&&(console.log(JSON.parse(a.responseText)),e(JSON.parse(a.responseText))))},a.send()}},{key:"updateInput",value:function(t){this.setState({search:t.target.value})}},{key:"search",value:function(){this.getGenius("/search?per_page=35&q="+encodeURI(this.state.search),this.getSearchResults)}},{key:"listenForEnter",value:function(t){13===t.keyCode&&this.search()}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{id:"search"},s.a.createElement("div",{id:"search_bar"},s.a.createElement(g.a,{placeholder:"Search music...",onChange:this.updateInput,onKeyDown:this.listenForEnter}),s.a.createElement("button",{onClick:this.search},"Search")),s.a.createElement("div",{id:"search_results",className:0===this.state.results.length?"empty":""},this.state.results.map((function(e){return s.a.createElement("div",{className:"result",key:e.song_path},s.a.createElement("div",{className:"info"},s.a.createElement("img",{src:e.image,alt:""}),s.a.createElement("div",{className:"text"},s.a.createElement("a",{className:"song",title:"Play this song",href:"/#"+e.song_path},e.title),s.a.createElement("div",{className:"artist",title:"View more from this artist",onClick:function(){return t.props.getArtist(e.artist)}},s.a.createElement("i",null,e.artist.name)))),t.props.songInPlaylist(e)?s.a.createElement(b.b,{className:"static",title:"Already in playlist"}):s.a.createElement(b.c,{className:"button",title:"Add to playlist",onClick:function(){return t.props.addSong(e)}}))}))))}}]),e}(n.Component)),O=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={history:[]},a.saveToFile=a.saveToFile.bind(Object(u.a)(a)),a.loadFile=a.loadFile.bind(Object(u.a)(a)),a.clearPlaylist=a.clearPlaylist.bind(Object(u.a)(a)),a.updateTitle=a.updateTitle.bind(Object(u.a)(a)),a.loadRandomSong=a.loadRandomSong.bind(Object(u.a)(a)),a.getRandomSong=a.getRandomSong.bind(Object(u.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"loadFile",value:function(t){var e=new FileReader;e.onload=function(t){var e=t.target.result,a=JSON.parse(e);this.props.updatePlaylist(a.name,a.contents)}.bind(this),e.readAsText(t.target.files[0])}},{key:"saveToFile",value:function(){var t=JSON.stringify(this.props.playlist),e=this.props.playlist.name.toLowerCase().replace(/ /g,"_")+".json";if(window.navigator&&window.navigator.msSaveOrOpenBlob){var a=new Blob([decodeURIComponent(encodeURI(t))],{type:"application/json;charset=utf-8;"});navigator.msSaveOrOpenBlob(a,e)}else{var n=document.createElement("a");n.download=e,n.href="data:application/json;charset=utf-8;,"+encodeURIComponent(t),n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},{key:"updateTitle",value:function(t){this.props.updatePlaylist(t.target.value,this.props.playlist.contents)}},{key:"clearPlaylist",value:function(){this.props.updatePlaylist(this.props.playlist.name,[])}},{key:"getRandomSong",value:function(){var t=this,e=this.props.playlist.contents.map((function(t){return t.song_path})).filter((function(e){return!t.state.history.includes(e)}));if(0===e.length){this.setState({history:[this.props.location.pathname]});var a=Math.floor(Math.random()*(this.props.playlist.contents.length-1));return this.props.playlist.contents.filter((function(e){return e.song_path!==t.props.location.pathname}))[a].song_path}return e[Math.floor(Math.random()*e.length)]}},{key:"loadRandomSong",value:function(){0!==this.props.playlist.contents.length&&(this.state.history.push(this.props.location.pathname),window.location.href="/#"+this.getRandomSong())}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{id:"playlist"},s.a.createElement("div",{id:"heading"},s.a.createElement("input",{id:"playlist_title",onChange:this.updateTitle,value:this.props.playlist.name,title:"Name your playlist"}),s.a.createElement("div",{id:"toolbar"},s.a.createElement(b.d,{title:"Load random song",className:"button"+(0===this.props.playlist.contents.length?" disabled":""),onClick:this.loadRandomSong}),s.a.createElement(b.f,{title:"Clear playlist",className:"button"+(0===this.props.playlist.contents.length?" disabled":""),onClick:this.clearPlaylist}),s.a.createElement(b.e,{title:"Save playlist",className:"button"+(0===this.props.playlist.contents.length?" disabled":""),onClick:this.saveToFile}),s.a.createElement(b.h,{title:"Load a saved playlist",className:"button",onClick:function(){document.getElementById("fileinput").click()}}),s.a.createElement("input",{type:"file",id:"fileinput",onChange:function(e){console.log("Upload"),t.loadFile(e)}}))),s.a.createElement("div",{id:"search_results"},this.props.playlist.contents.length>0?this.props.playlist.contents.map((function(e,a){return s.a.createElement("div",{className:"result",key:e.song_path},s.a.createElement("div",{className:"info"},s.a.createElement("img",{src:e.image,alt:""}),s.a.createElement("div",{className:"text"},s.a.createElement("a",{className:"song",title:"Play this song",href:"/#"+e.song_path},e.title),s.a.createElement("div",{className:"artist",title:"View more from this artist",onClick:function(){return t.props.getArtist(e.artist)}},s.a.createElement("i",null,e.artist.name)))),s.a.createElement(b.g,{title:"Add to playlist",className:"button",onClick:function(){t.props.removeSong(a)}}))})):s.a.createElement("div",{id:"alt"},"Search for songs to add to your playlist!")))}}]),e}(n.Component),S=(a(392),function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={songs:[],page:1,loading:!0},a.getSongs=a.getSongs.bind(Object(u.a)(a)),a.cleanUp=a.cleanUp.bind(Object(u.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){console.log(this.props.artist_id,void 0===this.props.artist_id),void 0!==this.props.artist&&0===this.state.songs.length&&(console.log("get artist songs"),this.getArtistSongs())}},{key:"getArtistSongs",value:function(){this.setState({loading:!0});var t=this.getSongs,e=new XMLHttpRequest;e.open("GET","https://api.genius.com/artists/"+this.props.artist.id+"/songs?per_page=15&page="+this.state.page+"&access_token=4qtBMiQeR5pD1zFm-vGmFV6j5khGAiRQskTCLXyuGbxeYGbnXrTnXIyA5n2iXjdg",!0),e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(1!==e.getResponseHeader("Content-Type").indexOf("text")&&t(JSON.parse(e.responseText).response))},e.send()}},{key:"getSongs",value:function(t){var e=this;console.log(t);var a=t.songs.map((function(t){return{title:t.title,artist:{name:t.primary_artist.name,id:t.primary_artist.id},lyrics_path:t.path,song_path:t.api_path,image:t.song_art_image_url}}));this.setState({songs:a,loading:!1,nextPage:t.next_page},(function(){return console.log(e.state.nextPage,!e.state.nextPage)}))}},{key:"cleanUp",value:function(t){var e=this;console.log(t),this.setState({songs:[]},this.props.getArtist,(function(){return console.log(e.state.songs)}))}},{key:"setPage",value:function(t){t===this.state.page||t<1||t>this.state.page&&!this.state.nextPage||this.setState({page:t},this.getArtistSongs)}},{key:"stopPropagation",value:function(t){t.stopPropagation()}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{id:"modal",onClick:this.cleanUp},s.a.createElement("div",{id:"body",onClick:this.stopPropagation},s.a.createElement("div",{id:"title"},this.props.artist.name),s.a.createElement("div",{id:"songs"},this.state.loading?s.a.createElement("div",{id:"loading"},"Loading..."):this.state.songs.map((function(e){return s.a.createElement("div",{className:"result",key:e.song_path},s.a.createElement("div",{className:"info"},s.a.createElement("img",{src:e.image,alt:""}),s.a.createElement("div",{className:"text"},s.a.createElement("a",{className:"song",title:"Play this song",href:"/#"+e.song_path},e.title),s.a.createElement("i",null,e.artist.name))),t.props.songInPlaylist(e)?s.a.createElement(b.b,{className:"static",title:"Already in playlist"}):s.a.createElement(b.c,{className:"button",title:"Add to playlist",onClick:function(){return t.props.addSong(e)}}))}))),s.a.createElement("div",{id:"pagination"},s.a.createElement("div",{className:"link",onClick:function(){return t.setPage(1)}},"First"),s.a.createElement("div",{className:"link "+(1===this.state.page?"disabled":""),onClick:function(){return t.setPage(t.state.page-1)}}," ","<<"," Previous"),s.a.createElement("div",null,this.state.page),s.a.createElement("div",{className:"link "+(this.state.nextPage?"":"disabled"),onClick:function(){return t.setPage(t.state.page+1)}}," Next ",">>"))))}}]),e}(n.Component)),j=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).state={playlist:{name:"My Playlist",contents:[]}},a.addSong=a.addSong.bind(Object(u.a)(a)),a.removeSong=a.removeSong.bind(Object(u.a)(a)),a.updatePlaylist=a.updatePlaylist.bind(Object(u.a)(a)),a.songInPlaylist=a.songInPlaylist.bind(Object(u.a)(a)),a.getArtist=a.getArtist.bind(Object(u.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.checkCookie()}},{key:"setCookie",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var s=0===a?"":"expires="+n.toUTCString()+";path=/";document.cookie=t+"="+JSON.stringify(e)+";"+s}},{key:"getCookie",value:function(t){for(var e=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var s=a[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(e))return s.substring(e.length,s.length)}return""}},{key:"checkCookie",value:function(){var t=this.getCookie("playlist");if(""!==t){var e=JSON.parse(t);e.contents?this.updatePlaylist(e.name,e.contents):this.updatePlaylist(e.name,[])}}},{key:"getArtist",value:function(t){var e=this;this.setState({artist:t},(function(){return console.log(e.state.artist)}))}},{key:"songInPlaylist",value:function(t){return this.state.playlist.contents.map((function(t){return JSON.stringify(t)})).includes(JSON.stringify(t))}},{key:"updatePlaylist",value:function(t,e){var a=this;this.setState({playlist:{name:t,contents:e}},(function(){return a.setCookie("playlist",a.state.playlist)}))}},{key:"addSong",value:function(t){if(!this.songInPlaylist(t)){var e=this.state.playlist.contents;e.push(t),this.updatePlaylist(this.state.playlist.name,e)}}},{key:"removeSong",value:function(t){var e=this.state.playlist.contents;e.splice(t,1),this.updatePlaylist(this.state.playlist.name,e)}},{key:"render",value:function(){return s.a.createElement("div",{id:"game"},s.a.createElement(k,{title:s.a.createElement("div",{id:"apptitle",onClick:function(){window.location.href="/#/",window.location.reload()},title:"a lyric guessing game"},"Versed")},s.a.createElement(E,{addSong:this.addSong,songInPlaylist:this.songInPlaylist,getArtist:this.getArtist}),s.a.createElement(O,{playlist:this.state.playlist,removeSong:this.removeSong,updatePlaylist:this.updatePlaylist,location:this.props.location,getArtist:this.getArtist})),void 0!==this.state.artist&&s.a.createElement(S,{artist:this.state.artist,getArtist:this.getArtist,addSong:this.addSong,songInPlaylist:this.songInPlaylist}),s.a.createElement(h.c,null,s.a.createElement(h.a,{exact:!0,path:"/",render:function(t){return s.a.createElement("div",{id:"home"},s.a.createElement("div",{className:"big"},"How well do you know your favorite songs?"),s.a.createElement("div",null,"Start by expanding the sidebar and searching for a song to play."),s.a.createElement("div",null,"Add songs to a playlist and randomize if you like a challenge."))}}),s.a.createElement(h.a,{path:"/songs/:genius_id",render:function(t){return s.a.createElement(v,t)}})))}}]),e}(n.Component),_=Object(h.f)(j);a(395);var N=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=a(99);o.a.render(s.a.createElement(C.a,null,s.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[175,1,2]]]);
//# sourceMappingURL=main.80745f46.chunk.js.map