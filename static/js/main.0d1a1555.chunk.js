(this["webpackJsonplyrics-quiz"]=this["webpackJsonplyrics-quiz"]||[]).push([[0],{105:function(e,t,n){},175:function(e,t,n){e.exports=n(395)},180:function(e,t,n){},206:function(e,t){},220:function(e,t){},222:function(e,t){},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},391:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(171),r=n.n(i),o=(n(180),n(7)),c=n(8),u=n(11),l=n(9),d=n(10),h=n(22),p=n(2),f=n(396),m=(n(105),a.Component,n(64)),g=n.n(m),v=(n(388),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={time:0},n.passTime=n.passTime.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.passTime,1e3)}},{key:"passTime",value:function(){this.props.forfeit_status||this.props.gameWon()||this.setState({time:this.state.time+1})}},{key:"padNumber",value:function(e){if(e<100)return("0"+e).slice(-2)}},{key:"render",value:function(){return s.a.createElement("div",{id:"timer",className:this.props.forfeit_status?"forfeit":this.props.gameWon()?"won":""},this.padNumber(Math.floor(this.state.time/3600)%24),":",this.padNumber(Math.floor(this.state.time/60)%60),":",this.padNumber(this.state.time%60))}}]),t}(a.Component)),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={discoveredWords:[],forfeit:!1},n.getLyrics=n.getLyrics.bind(Object(p.a)(n)),n.setSong=n.setSong.bind(Object(p.a)(n)),n.discover=n.discover.bind(Object(p.a)(n)),n.forfeit=n.forfeit.bind(Object(p.a)(n)),n.checkWord=n.checkWord.bind(Object(p.a)(n)),n.gameWon=n.gameWon.bind(Object(p.a)(n)),n.lyricDiscovered=n.lyricDiscovered.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getSong()}},{key:"getSong",value:function(){var e=this.getLyrics,t=new XMLHttpRequest;t.open("GET","https://api.genius.com/songs/"+this.props.match.params.genius_id+"?access_token=4qtBMiQeR5pD1zFm-vGmFV6j5khGAiRQskTCLXyuGbxeYGbnXrTnXIyA5n2iXjdg",!0),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(1!==t.getResponseHeader("Content-Type").indexOf("text")&&e(JSON.parse(t.responseText).response.song))},t.send()}},{key:"getLyrics",value:function(e){var t=this.setSong,n=new XMLHttpRequest;n.open("GET","https://cors-anywhere.herokuapp.com/"+e.url,!0),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status&&1!==n.getResponseHeader("Content-Type").indexOf("text")){var a=g.a.load(n.responseText),s={};console.log(e),s.title=e.title?e.title:"N/A",s.album=e.album?e.album.name:"N/A",s.artist=e.primary_artist?e.primary_artist.name:"N/A",s.lyrics=a(".lyrics").text().replace(/\[.*\]/g,"").trim().replace(/[\u2019\u2018]/g,"'").split(/[\r\n, ?!:;()."-]+/).filter((function(e){return""!==e&&e})),console.log(s.lyrics),t(s)}},n.send()}},{key:"forfeit",value:function(){this.setState({forfeit_status:!0})}},{key:"setSong",value:function(e){this.setState({song:e,discoveredWords:[],forfeit:!1})}},{key:"discover",value:function(e,t){var n=this.state.discoveredWords;n[t]=e,this.setState({discoveredWords:n})}},{key:"wordsEquivalent",value:function(e,t){return e.toLowerCase().replace(/'/g,"").trim()===t.toLowerCase().replace(/'/g,"").trim()}},{key:"lyricDiscovered",value:function(e){var t=this;return this.state.discoveredWords.map((function(n){return t.wordsEquivalent(n,e)})).includes(!0)}},{key:"checkWord",value:function(e){var t=this,n=e.target.value;this.lyricDiscovered(n)||this.state.song.lyrics.forEach((function(a,s){t.wordsEquivalent(a,n)&&(t.discover(a,s),e.target.value="")}))}},{key:"gameWon",value:function(){return JSON.stringify(this.state.discoveredWords)===JSON.stringify(this.state.song.lyrics)}},{key:"render",value:function(){var e=this;return console.log(this.state),s.a.createElement("div",{id:"outer_display"},"undefined"!=typeof this.state.song?s.a.createElement("div",{id:"display"},this.gameWon()&&s.a.createElement("div",{id:"winner"},"You won!"),s.a.createElement(f.a,{type:"search",disabled:this.state.forfeit_status||this.gameWon(),onChange:this.checkWord}),s.a.createElement("div",{id:"info"},s.a.createElement("div",null,this.state.discoveredWords.filter((function(e){return e})).length," / ",this.state.song.lyrics.length),s.a.createElement(v,{forfeit_status:this.state.forfeit_status,gameWon:this.gameWon}),s.a.createElement("button",{disabled:this.state.forfeit_status||this.gameWon(),onClick:this.forfeit},"Forfeit")),(this.state.forfeit_status||this.gameWon())&&s.a.createElement("div",{id:"song_title",className:this.state.forfeit_status?"forfeit":"won"},this.state.song.title),s.a.createElement("div",{id:"lyrics"},this.state.song.lyrics.map((function(t,n){return s.a.createElement("div",{key:n,className:"word "+(e.lyricDiscovered(t)?"":e.state.forfeit_status?"forfeit":"undiscovered")},t)})))):"Loading...")}}]),t}(a.Component),b=(n(389),n(63)),k=(n(390),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={expanded:!1},n.toggle=n.toggle.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){return s.a.createElement("div",{id:"sidebar",className:this.state.expanded?" expanded":""},s.a.createElement("div",{id:"header"},this.state.expanded?s.a.createElement("div",{id:"title"}," "):"",s.a.createElement(b.a,{id:"icon",onClick:this.toggle})),this.state.expanded?this.props.children:"")}}]),t}(a.Component)),E=(n(391),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={search:"",results:[]},n.readText=n.readText.bind(Object(p.a)(n)),n.updateInput=n.updateInput.bind(Object(p.a)(n)),n.getSearchResults=n.getSearchResults.bind(Object(p.a)(n)),n.search=n.search.bind(Object(p.a)(n)),n.listenForEnter=n.listenForEnter.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"readText",value:function(e){var t=JSON.parse(e),n=t.result.track.text.trim().replace(/[\u2019\u2018]/g,"'"),a={};a.title=t.result.track.name,a.artist=t.result.artist,a.lyrics=n.split(/[\r\n, ?!:;()."-]+/).filter((function(e){return""!==e&&e})),this.props.setSong(a)}},{key:"getSearchResults",value:function(e){var t=e.response.hits.map((function(e){return{title:e.result.title,artist:e.result.primary_artist.name,lyrics_path:e.result.path,song_path:e.result.api_path}}));console.log(e),console.log(t),this.setState({results:t})}},{key:"getLyrics",value:function(e){var t=new XMLHttpRequest;t.open("GET","https://cors-anywhere.herokuapp.com/"+e.response.song.url,!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status&&1!==t.getResponseHeader("Content-Type").indexOf("text")){var e=g.a.load(t.responseText)(".lyrics").text();e=(e=e.replace(/\[.*\]/g,"")).trim().replace(/[\u2019\u2018]/g,"'").split(/[\r\n, ?!:;()."-]+/).filter((function(e){return""!==e&&e}))}},t.send()}},{key:"getGenius",value:function(e,t){var n=new XMLHttpRequest;console.log("https://api.genius.com"+e+"?access_token=4qtBMiQeR5pD1zFm-vGmFV6j5khGAiRQskTCLXyuGbxeYGbnXrTnXIyA5n2iXjdg"),n.open("GET","https://api.genius.com"+e+"&access_token=4qtBMiQeR5pD1zFm-vGmFV6j5khGAiRQskTCLXyuGbxeYGbnXrTnXIyA5n2iXjdg",!0),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(1!==n.getResponseHeader("Content-Type").indexOf("text")&&(console.log(JSON.parse(n.responseText)),t(JSON.parse(n.responseText))))},n.send()}},{key:"renderSearch",value:function(){return this.state.results.map((function(e){return s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){window.location.href=e.song_path}},e.title," by ",s.a.createElement("i",null,e.artist)))}))}},{key:"updateInput",value:function(e){this.setState({search:e.target.value})}},{key:"search",value:function(){this.getGenius("/search?q="+encodeURI(this.state.search),this.getSearchResults)}},{key:"listenForEnter",value:function(e){13===e.keyCode&&this.search()}},{key:"render",value:function(){return s.a.createElement("div",{id:"upload"},s.a.createElement("div",{id:"search"},s.a.createElement(f.a,{placeholder:"Search music...",onChange:this.updateInput,onKeyDown:this.listenForEnter}),s.a.createElement("button",{onClick:this.search},"Search")),this.renderSearch())}}]),t}(a.Component)),O=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"game"},s.a.createElement(k,null,s.a.createElement("div",{id:"menu"},s.a.createElement(E,{setSong:this.setSong}))),s.a.createElement(h.c,{location:window.location},s.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return s.a.createElement("div",{id:"home"},s.a.createElement("div",{className:"big"},"Guess the lyrics...without knowing the song."),s.a.createElement("div",null,"Start by expanding the sidebar and choosing an album to play."))}}),s.a.createElement(h.a,{path:"/songs/:genius_id",render:function(e){return s.a.createElement(y,e)}})))}}]),t}(a.Component),j=Object(h.f)(O);n(394);var S=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=n(100);r.a.render(s.a.createElement(x.a,null,s.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[175,1,2]]]);
//# sourceMappingURL=main.0d1a1555.chunk.js.map